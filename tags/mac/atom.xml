<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Mac | Biaobiaoqi的博客]]></title>
  <link href="http://biaobiaoqi.github.io/tags/mac/atom.xml" rel="self"/>
  <link href="http://biaobiaoqi.github.io/"/>
  <updated>2016-04-19T00:27:46+08:00</updated>
  <id>http://biaobiaoqi.github.io/</id>
  <author>
    <name><![CDATA[Biaobiaoqi]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[记对MBP一次失败的备份和重装]]></title>
    <link href="http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd/"/>
    <updated>2013-11-24T02:08:00+08:00</updated>
    <id>http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd</id>
    <content type="html"><![CDATA[<h2>背景</h2>

<p>大概一年前，给我11年底款的13寸MBP的光驱位替换上了一块M4 128G的SSD，用做系统盘，而机器原本的HDD则退化为数据存储盘。</p>

<p>前两天发现MBP间歇性的变得很慢，查看CPU和内存都没有异常，使用<a href="http://www.volitans-software.com/smart_utility.php">SMART Utility</a>检查发现有坏道出现，如下图：</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdhdd%20bad%20sector.png?imageView/2/w/800/h/800" alt="bad sector" /></p>

<p>硬盘出现坏道后，会给坏道的数据重新分配备用sector，而这种sector是有限的，再者坏道可能会扩散蔓延，这基本意味着HDD生命的结束了。只能换硬盘了。</p>

<p>这才意识到自己的使用习惯的不当：平时没有关机的习惯，一般合上盖子就将笔记本放到书包里走人了，而运行状态的HDD在颠簸的环境里是很容易出现机械损伤的（相比之下SSD则不会）。</p>

<p>考虑到自己没有太大存数据的需求（以前700G+的HDD只存了200G不到，其中很多数据还是存了之后几乎没有使用的），决定再入一块M4 128G的SSD，两块SSD组<a href="http://zh.wikipedia.org/zh-cn/RAID#RAID_0">RAID0</a>。</p>

<!--more-->


<h2>过程</h2>

<p>总体计划如下：</p>

<ol>
<li>使用Time Machine 备份原来系统的数据。</li>
<li>购买SSD，组RAID0(原来SSD中的数据会被擦除)</li>
<li>做一个U盘系统恢复盘，用于重装系统。</li>
<li>重装系统后，通过系统工具迁移助理将备份的数据还原到新系统中。</li>
</ol>


<p>主要参考了<a href="http://v.youku.com/v_show/id_XNDAxODk3MTUy.html">王自如的RAID0装配教程</a>。</p>

<h3>1.备份数据</h3>

<p>使用移动硬盘来做数据备份。</p>

<p>用OS X的系统工具“磁盘工具”将移动硬盘格式化为MBP支持的文件系统格式。启动Time Machine，设定移动硬盘为备份路径，在Time Machine的偏好中，设定备份源排除HDD。接下来就等系统自动做好备份了。</p>

<p>理论上，通过Time Machine合理备份的系统，再也不用担心硬盘挂掉的情况。即使换新机器，也能在新系统中还原出根原来一样的环境（暂不支持跨系统版本的还原）。意外的是，当然企图通过数据迁移还原系统时，发现我备份的数据块无法识别-，-。</p>

<h3>2.拆机，组装</h3>

<p>在天猫上从上次购买的商家处直接又下了一单，买了同样一款的SSD。（注意，这里必须要使用同款SSD）。</p>

<p>拆后盖驾轻就熟，倒是在拆卸硬盘时，意外的发现自己没有六角形的T6星型螺丝刀，而这是笔记本固定硬盘的四颗螺丝钉的规格。<del>（裤子都脱了，总不能又穿上吧）</del>幸运的是，我在自行车修车摊问师傅借到了老虎钳，顺利拧下了那几颗螺丝。</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdmbp.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdspike.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p>换上SSD后，需要使用<a href="http://support.apple.com/kb/HT4848?viewlocale=zh_CN">RecoveryDiskAssistant</a>制作的U盘给两块SSD做RAID0设定。详情参见王自如的视频。</p>

<h3>3.重装系统</h3>

<p>有两种重装系统的方式：</p>

<ol>
<li>使用RecoveryDiskAssistant的U盘，联网安装OS X系统；</li>
<li>根据系统安装文件，制作U盘安装盘，参见<a href="http://briian.com/8534/mac-usb-installer.html">《如何製作 Mac OS X 專屬 USB 系統安裝》</a></li>
</ol>


<p>我使用后者安装了系统。</p>

<h3>4.还原备份</h3>

<p>在安装系统的过程中，系统会询问用户是否需要迁移数据，如果跳过这一步，还可以在安装完成系统后，运行“迁移助理”来还原备份。</p>

<p>由于我的操作失误，没有完全备份下整个系统，造成“迁移助理”无法识别备份数据。只能从备份数据中将有用的数据手工的迁移到新系统中，应用软件都得重新下载安装。全是泪啊=(。</p>

<h2>总结</h2>

<p>备份数据只有60G，而我原来系统的数据总量（包括操作系统本身）大概有120G，即使考虑有压缩，60G也相差的很远了。备份时急于求成，没有意识到这一点，造成备份不成功，提醒自己谨小慎微。</p>

<p>顺着这次重配系统环境，我整理了自己的Mac OS X软件安装索引，参见博文：<a href="http://biaobiaoqi.github.io/blog/2013/11/24/install-software-in-os-x/">《我的OS X软件安装索引》</a>，当然，希望自己再也不会用到。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[记对MBP一次失败的备份和重装]]></title>
    <link href="http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd/"/>
    <updated>2013-11-24T02:08:00+08:00</updated>
    <id>http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd</id>
    <content type="html"><![CDATA[<h2>背景</h2>

<p>大概一年前，给我11年底款的13寸MBP的光驱位替换上了一块M4 128G的SSD，用做系统盘，而机器原本的HDD则退化为数据存储盘。</p>

<p>前两天发现MBP间歇性的变得很慢，查看CPU和内存都没有异常，使用<a href="http://www.volitans-software.com/smart_utility.php">SMART Utility</a>检查发现有坏道出现，如下图：</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdhdd%20bad%20sector.png?imageView/2/w/800/h/800" alt="bad sector" /></p>

<p>硬盘出现坏道后，会给坏道的数据重新分配备用sector，而这种sector是有限的，再者坏道可能会扩散蔓延，这基本意味着HDD生命的结束了。只能换硬盘了。</p>

<p>这才意识到自己的使用习惯的不当：平时没有关机的习惯，一般合上盖子就将笔记本放到书包里走人了，而运行状态的HDD在颠簸的环境里是很容易出现机械损伤的（相比之下SSD则不会）。</p>

<p>考虑到自己没有太大存数据的需求（以前700G+的HDD只存了200G不到，其中很多数据还是存了之后几乎没有使用的），决定再入一块M4 128G的SSD，两块SSD组<a href="http://zh.wikipedia.org/zh-cn/RAID#RAID_0">RAID0</a>。</p>

<!--more-->


<h2>过程</h2>

<p>总体计划如下：</p>

<ol>
<li>使用Time Machine 备份原来系统的数据。</li>
<li>购买SSD，组RAID0(原来SSD中的数据会被擦除)</li>
<li>做一个U盘系统恢复盘，用于重装系统。</li>
<li>重装系统后，通过系统工具迁移助理将备份的数据还原到新系统中。</li>
</ol>


<p>主要参考了<a href="http://v.youku.com/v_show/id_XNDAxODk3MTUy.html">王自如的RAID0装配教程</a>。</p>

<h3>1.备份数据</h3>

<p>使用移动硬盘来做数据备份。</p>

<p>用OS X的系统工具“磁盘工具”将移动硬盘格式化为MBP支持的文件系统格式。启动Time Machine，设定移动硬盘为备份路径，在Time Machine的偏好中，设定备份源排除HDD。接下来就等系统自动做好备份了。</p>

<p>理论上，通过Time Machine合理备份的系统，再也不用担心硬盘挂掉的情况。即使换新机器，也能在新系统中还原出根原来一样的环境（暂不支持跨系统版本的还原）。意外的是，当然企图通过数据迁移还原系统时，发现我备份的数据块无法识别-，-。</p>

<h3>2.拆机，组装</h3>

<p>在天猫上从上次购买的商家处直接又下了一单，买了同样一款的SSD。（注意，这里必须要使用同款SSD）。</p>

<p>拆后盖驾轻就熟，倒是在拆卸硬盘时，意外的发现自己没有六角形的T6星型螺丝刀，而这是笔记本固定硬盘的四颗螺丝钉的规格。<del>（裤子都脱了，总不能又穿上吧）</del>幸运的是，我在自行车修车摊问师傅借到了老虎钳，顺利拧下了那几颗螺丝。</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdmbp.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdspike.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p>换上SSD后，需要使用<a href="http://support.apple.com/kb/HT4848?viewlocale=zh_CN">RecoveryDiskAssistant</a>制作的U盘给两块SSD做RAID0设定。详情参见王自如的视频。</p>

<h3>3.重装系统</h3>

<p>有两种重装系统的方式：</p>

<ol>
<li>使用RecoveryDiskAssistant的U盘，联网安装OS X系统；</li>
<li>根据系统安装文件，制作U盘安装盘，参见<a href="http://briian.com/8534/mac-usb-installer.html">《如何製作 Mac OS X 專屬 USB 系統安裝》</a></li>
</ol>


<p>我使用后者安装了系统。</p>

<h3>4.还原备份</h3>

<p>在安装系统的过程中，系统会询问用户是否需要迁移数据，如果跳过这一步，还可以在安装完成系统后，运行“迁移助理”来还原备份。</p>

<p>由于我的操作失误，没有完全备份下整个系统，造成“迁移助理”无法识别备份数据。只能从备份数据中将有用的数据手工的迁移到新系统中，应用软件都得重新下载安装。全是泪啊=(。</p>

<h2>总结</h2>

<p>备份数据只有60G，而我原来系统的数据总量（包括操作系统本身）大概有120G，即使考虑有压缩，60G也相差的很远了。备份时急于求成，没有意识到这一点，造成备份不成功，提醒自己谨小慎微。</p>

<p>顺着这次重配系统环境，我整理了自己的Mac OS X软件安装索引，参见博文：<a href="http://biaobiaoqi.github.io/blog/2013/11/24/install-software-in-os-x/">《我的OS X软件安装索引》</a>，当然，希望自己再也不会用到。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[记对MBP一次失败的备份和重装]]></title>
    <link href="http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd/"/>
    <updated>2013-11-24T02:08:00+08:00</updated>
    <id>http://biaobiaoqi.github.io/blog/2013/11/24/failed-in-replacing-hdd</id>
    <content type="html"><![CDATA[<h2>背景</h2>

<p>大概一年前，给我11年底款的13寸MBP的光驱位替换上了一块M4 128G的SSD，用做系统盘，而机器原本的HDD则退化为数据存储盘。</p>

<p>前两天发现MBP间歇性的变得很慢，查看CPU和内存都没有异常，使用<a href="http://www.volitans-software.com/smart_utility.php">SMART Utility</a>检查发现有坏道出现，如下图：</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdhdd%20bad%20sector.png?imageView/2/w/800/h/800" alt="bad sector" /></p>

<p>硬盘出现坏道后，会给坏道的数据重新分配备用sector，而这种sector是有限的，再者坏道可能会扩散蔓延，这基本意味着HDD生命的结束了。只能换硬盘了。</p>

<p>这才意识到自己的使用习惯的不当：平时没有关机的习惯，一般合上盖子就将笔记本放到书包里走人了，而运行状态的HDD在颠簸的环境里是很容易出现机械损伤的（相比之下SSD则不会）。</p>

<p>考虑到自己没有太大存数据的需求（以前700G+的HDD只存了200G不到，其中很多数据还是存了之后几乎没有使用的），决定再入一块M4 128G的SSD，两块SSD组<a href="http://zh.wikipedia.org/zh-cn/RAID#RAID_0">RAID0</a>。</p>

<!--more-->


<h2>过程</h2>

<p>总体计划如下：</p>

<ol>
<li>使用Time Machine 备份原来系统的数据。</li>
<li>购买SSD，组RAID0(原来SSD中的数据会被擦除)</li>
<li>做一个U盘系统恢复盘，用于重装系统。</li>
<li>重装系统后，通过系统工具迁移助理将备份的数据还原到新系统中。</li>
</ol>


<p>主要参考了<a href="http://v.youku.com/v_show/id_XNDAxODk3MTUy.html">王自如的RAID0装配教程</a>。</p>

<h3>1.备份数据</h3>

<p>使用移动硬盘来做数据备份。</p>

<p>用OS X的系统工具“磁盘工具”将移动硬盘格式化为MBP支持的文件系统格式。启动Time Machine，设定移动硬盘为备份路径，在Time Machine的偏好中，设定备份源排除HDD。接下来就等系统自动做好备份了。</p>

<p>理论上，通过Time Machine合理备份的系统，再也不用担心硬盘挂掉的情况。即使换新机器，也能在新系统中还原出根原来一样的环境（暂不支持跨系统版本的还原）。意外的是，当然企图通过数据迁移还原系统时，发现我备份的数据块无法识别-，-。</p>

<h3>2.拆机，组装</h3>

<p>在天猫上从上次购买的商家处直接又下了一单，买了同样一款的SSD。（注意，这里必须要使用同款SSD）。</p>

<p>拆后盖驾轻就熟，倒是在拆卸硬盘时，意外的发现自己没有六角形的T6星型螺丝刀，而这是笔记本固定硬盘的四颗螺丝钉的规格。<del>（裤子都脱了，总不能又穿上吧）</del>幸运的是，我在自行车修车摊问师傅借到了老虎钳，顺利拧下了那几颗螺丝。</p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdmbp.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p><img src="http://biaobiaoqi.u.qiniudn.com/ssdspike.JPG?imageView/2/w/800/h/800" alt="img" /></p>

<p>换上SSD后，需要使用<a href="http://support.apple.com/kb/HT4848?viewlocale=zh_CN">RecoveryDiskAssistant</a>制作的U盘给两块SSD做RAID0设定。详情参见王自如的视频。</p>

<h3>3.重装系统</h3>

<p>有两种重装系统的方式：</p>

<ol>
<li>使用RecoveryDiskAssistant的U盘，联网安装OS X系统；</li>
<li>根据系统安装文件，制作U盘安装盘，参见<a href="http://briian.com/8534/mac-usb-installer.html">《如何製作 Mac OS X 專屬 USB 系統安裝》</a></li>
</ol>


<p>我使用后者安装了系统。</p>

<h3>4.还原备份</h3>

<p>在安装系统的过程中，系统会询问用户是否需要迁移数据，如果跳过这一步，还可以在安装完成系统后，运行“迁移助理”来还原备份。</p>

<p>由于我的操作失误，没有完全备份下整个系统，造成“迁移助理”无法识别备份数据。只能从备份数据中将有用的数据手工的迁移到新系统中，应用软件都得重新下载安装。全是泪啊=(。</p>

<h2>总结</h2>

<p>备份数据只有60G，而我原来系统的数据总量（包括操作系统本身）大概有120G，即使考虑有压缩，60G也相差的很远了。备份时急于求成，没有意识到这一点，造成备份不成功，提醒自己谨小慎微。</p>

<p>顺着这次重配系统环境，我整理了自己的Mac OS X软件安装索引，参见博文：<a href="http://biaobiaoqi.github.io/blog/2013/11/24/install-software-in-os-x/">《我的OS X软件安装索引》</a>，当然，希望自己再也不会用到。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重置MBP的NVRAM]]></title>
    <link href="http://biaobiaoqi.github.io/blog/2013/10/07/reset-nvram/"/>
    <updated>2013-10-07T23:25:00+08:00</updated>
    <id>http://biaobiaoqi.github.io/blog/2013/10/07/reset-nvram</id>
    <content type="html"><![CDATA[<h3>遇到问题</h3>

<p>今天的中国好声音决赛之夜，我的Mac突然无法发出声响了=(，在此之前，刚看过一些视频，音频输出正常。</p>

<p>我尝试了使用MBP内建的外放和插入iphone4s的耳机并将音量调整到最大，没有任何声响。网上查阅了一些相关异常的资料，发现可能是NVRAM的问题。官方资料见链接：<a href="http://support.apple.com/kb/HT1379?viewlocale=zh_CN">《关于 NVRAM 和 PRAM》</a>。</p>

<p>按照重置NVRAM的方法操作后，果然Mac又拥有了声音，可以看好声音啊=)</p>

<p>这里对NVRAM做一些记录：</p>

<!--more-->


<h3>NVRAM</h3>

<p>Mac 会将某些设置储存在特殊内存区域中，而且即使关机这些设置也不会丢失。在基于 Intel 的 Mac 上，存储位置是称为 NVRAM 的内存。NVRAM为Non-Volatile Random Access Memory的缩写。</p>

<p>存储在 NVRAM/PRAM 中的信息包括：</p>

<ul>
<li>扬声器音量</li>
<li>屏幕分辨率</li>
<li>启动磁盘选择</li>
<li>最近的内核崩溃信息（如果有的话）</li>
</ul>


<!--MORE-->


<p>也就是说，如果机器存在声音、屏幕分辨率、启动速度等方面的异常时，可以尝试使用重置的方式做恢复。同时，官方资料中也提到，『如果您正在故障诊断网络问题，重置不会有任何帮助』。</p>

<h3>配置NVRAM</h3>

<p>实际上，也可以在shell中命令配置nvram。比如，可以通过<code>nvram -xp</code>命令查看到xml格式的配置表示。我的如下：</p>

<p>```
$ nvram -xp
&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict></p>

<pre><code>&lt;key&gt;LocationServicesEnabled&lt;/key&gt;
&lt;data&gt;
AQ==
&lt;/data&gt;
&lt;key&gt;SystemAudioVolume&lt;/key&gt;
&lt;data&gt;
Xw==
&lt;/data&gt;
&lt;key&gt;backlight-level&lt;/key&gt;
&lt;data&gt;
9wA=
&lt;/data&gt;
&lt;key&gt;fmm-computer-name&lt;/key&gt;
&lt;data&gt;
Ymlhb2JpYW9xaQ==
&lt;/data&gt;
</code></pre>

<p></dict>
</plist>
```</p>

<h3>其他参考</h3>

<ul>
<li><a href="http://blog.csdn.net/afatgoat/article/details/3851554">Mac OS X: 系统nvram启动参数</a></li>
<li><a href="http://support.apple.com/kb/HT1895?viewlocale=zh_CN">何时要重置 NVRAM 或 PRAM</a></li>
<li><a href="http://en.wikipedia.org/wiki/Non-volatile_random-access_memory">NVRAM wikipedia</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[重置MBP的NVRAM]]></title>
    <link href="http://biaobiaoqi.github.io/blog/2013/10/07/reset-nvram/"/>
    <updated>2013-10-07T23:25:00+08:00</updated>
    <id>http://biaobiaoqi.github.io/blog/2013/10/07/reset-nvram</id>
    <content type="html"><![CDATA[<h3>遇到问题</h3>

<p>今天的中国好声音决赛之夜，我的Mac突然无法发出声响了=(，在此之前，刚看过一些视频，音频输出正常。</p>

<p>我尝试了使用MBP内建的外放和插入iphone4s的耳机并将音量调整到最大，没有任何声响。网上查阅了一些相关异常的资料，发现可能是NVRAM的问题。官方资料见链接：<a href="http://support.apple.com/kb/HT1379?viewlocale=zh_CN">《关于 NVRAM 和 PRAM》</a>。</p>

<p>按照重置NVRAM的方法操作后，果然Mac又拥有了声音，可以看好声音啊=)</p>

<p>这里对NVRAM做一些记录：</p>

<!--more-->


<h3>NVRAM</h3>

<p>Mac 会将某些设置储存在特殊内存区域中，而且即使关机这些设置也不会丢失。在基于 Intel 的 Mac 上，存储位置是称为 NVRAM 的内存。NVRAM为Non-Volatile Random Access Memory的缩写。</p>

<p>存储在 NVRAM/PRAM 中的信息包括：</p>

<ul>
<li>扬声器音量</li>
<li>屏幕分辨率</li>
<li>启动磁盘选择</li>
<li>最近的内核崩溃信息（如果有的话）</li>
</ul>


<!--MORE-->


<p>也就是说，如果机器存在声音、屏幕分辨率、启动速度等方面的异常时，可以尝试使用重置的方式做恢复。同时，官方资料中也提到，『如果您正在故障诊断网络问题，重置不会有任何帮助』。</p>

<h3>配置NVRAM</h3>

<p>实际上，也可以在shell中命令配置nvram。比如，可以通过<code>nvram -xp</code>命令查看到xml格式的配置表示。我的如下：</p>

<p>```
$ nvram -xp
&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict></p>

<pre><code>&lt;key&gt;LocationServicesEnabled&lt;/key&gt;
&lt;data&gt;
AQ==
&lt;/data&gt;
&lt;key&gt;SystemAudioVolume&lt;/key&gt;
&lt;data&gt;
Xw==
&lt;/data&gt;
&lt;key&gt;backlight-level&lt;/key&gt;
&lt;data&gt;
9wA=
&lt;/data&gt;
&lt;key&gt;fmm-computer-name&lt;/key&gt;
&lt;data&gt;
Ymlhb2JpYW9xaQ==
&lt;/data&gt;
</code></pre>

<p></dict>
</plist>
```</p>

<h3>其他参考</h3>

<ul>
<li><a href="http://blog.csdn.net/afatgoat/article/details/3851554">Mac OS X: 系统nvram启动参数</a></li>
<li><a href="http://support.apple.com/kb/HT1895?viewlocale=zh_CN">何时要重置 NVRAM 或 PRAM</a></li>
<li><a href="http://en.wikipedia.org/wiki/Non-volatile_random-access_memory">NVRAM wikipedia</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
